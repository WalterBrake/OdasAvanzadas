include ../../assets/pug/_head
include ../../assets/pug/_scripts

- title = 'Valoro la importancia del agua'

<!DOCTYPE html>
html(lang="es")
    +head
        style.
            .rain {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                z-index: 3;
            }
            .rain lottie-player {
                width: 130% !important;
            }
            .images-wr {
                overflow: hidden;
                position: relative;
            }
            .images {
                position: relative;
                width: 200%;
                display: flex;
            }
            .images .btna.button {
                position: absolute;
                left: 38%;
                top: 2%;
                border: 2px solid var(--accent);
                color: var(--accent);
                box-shadow: 4px 4px 0 var(--sec);
            }
            @media (max-width: 680px) {
                .images .btna.button {
                    font-size: 0.5rem;
                    left: 33%;
                    padding: 2px;
                    border-width: 1px;
                    box-shadow: 2px 2px 0 var(--sec);
                }
            }
            .images .btnb.button {
                position: absolute;
                left: 52%;
                top: 2%;;
                border: 2px solid var(--accent);
                color: var(--accent);
                box-shadow: 4px 4px 0 var(--sec);
            }
            @media (max-width: 680px) {
                .images .btnb.button {
                    font-size: 0.5rem;
                    left: 52%;
                    padding: 2px;
                    border-width: 1px;
                    box-shadow: 2px 2px 0 var(--sec);
                }
            }
            .images.two {
                margin-left: -100%;
            }
            .im1,
            .im2 {
                position: relative;
            }
            .im1 .drop,
            .im2 .drop {
                position: absolute;
                width: 20%;
                height: 10%;
                background: #000;
                left: 0;
                top: 0;
                border-radius: 10px;
                background: #E4F3F8;
                border: 4px solid #0078BF;
                font-size: 0.5rem;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .im1 .drop .number.smaller,
            .im2 .drop .number.smaller {
                font-size: 0.8rem;
            }
            @media (max-width: 680px) {
                .im1 .drop,
                .im2 .drop {
                    border-width: 2px;
                    margin-top: -1%;
                    font-size: 5px !important;
                    line-height: 1;
                }
                .im1 .drop .number.smaller,
                .im2 .drop .number.smaller {
                    font-size: 0.6rem;
                }
            }
            .im1 .drop:nth-child(1) {
                left: 3%;
                top: 14%;
                width: 40%;
                height: 15%;
                border-color: #00B492;
            }
            .im1 .drop:nth-child(2) {
                left: 40%;
                top: 40%;
                width: 40%;
                height: 5%;
                border-color: #C1403C;
            }
            .im1 .drop:nth-child(3) {
                left: 18%;
                top: 76%;
                width: 26%;
                height: 5%;
                border-color: #0078BF;
            }
            .im1 .drop:nth-child(4) {
                left: 11%;
                top: 34%;
                width: 24%;
                height: 22%;
                border-radius: 50%;
                background: transparent;
                border: none;
            }
            .im1 .drop:nth-child(5) {
                left: 57%;
                top: 61.5%;
                width: 24%;
                height: 22%;
                border-radius: 50%;
                border: none;
                background: transparent;
            }
            .im2 .drop:nth-child(1) {
                left: 55%;
                top: 29.3%;
                width: 30%;
                height: 5%;
                border-color: #F4946A;
            }
            .im2 .drop:nth-child(2) {
                left: 53%;
                top: 46%;
                width: 30%;
                height: 5%;
                border-color: #CE0495;
            }
            .im2 .drop:nth-child(3) {
                left: 20%;
                top: 77.5%;
                width: 30%;
                height: 5%;
                border-color: #aEe495;
            }
            .im2 .drop:nth-child(4) {
                left: 54%;
                top: 60%;
                width: 43%;
                height: 8%;
                border-color: #F6F6D0;
            }
            .im2 .drop:nth-child(5) {
                left: 20%;
                top: 92%;
                width: 70%;
                height: 5%;
                border-color: #F6F6D0;
            }
            .im2 .drop:nth-child(6) {
                left: 41%;
                top: 1%;
                width: 24%;
                height: 22%;
                border-radius: 50%;
                border: none;
                background: transparent;
            }
            .im2 .drop:nth-child(7) {
                left: 10.5%;
                top: 24%;
                width: 24%;
                height: 22%;
                border-radius: 50%;
                border: none;
                background: transparent;
            }
            .im2 .drop:nth-child(8) {
                left: 2.3%;
                top: 59%;
                width: 24%;
                height: 22%;
                border-radius: 50%;
                border: none;
                background: transparent;
            }
            .drags {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                align-items: center;
            }
            .drag {
                width: auto;
                height: auto;
                max-width: 40%;
                width: fit-content;
                margin: 2px;
            }
            @media (min-width: 820px){
                .drag{
                margin: 10px;
                }
            }
            .drag .txt {
                font-size: 0.6rem;
                background: #E4F3F8;
                padding: 2px;
                border-radius: 4px;
            }
            .drag img {
                width: 100%;
                max-width: 40px;
                min-width: 40px;
            }
            .drag .number.smaller {
                font-size: 0.9rem !important;
            }
            @media (max-width: 820px) {
                .drag {
                    width: fit-content;
                }
                .drag .txt{
                    font-size: 0.5rem;
                }
            }
            @media (max-width: 680px) {
                .drag .number.smaller {
                    font-size: 0.8rem !important;
                }
            }
            [wascloned] {
                display: none;
            }

            .res {
                position: absolute;
                width: 50%;
                height: 40%;
                box-shadow: 0 0 100px var(--accent), 0 0 10px var(--clear);
                border-radius: 50%;
                animation: anim 0.5s;
                animation-iteration-count: infinite;
            }
            .res.r1 {
                left: -5%;
                top: 45%;
            }
            .res.r2 {
                left: 60%;
                top: 70%;
            }
            .res.r3 {
                left: 58%;
                top: -5%;
            }
            .res.r4 {
                left: 16%;
                top: 35%;
            }
            .res.r5 {
                left: 54%;
                top: 62%;
            }
            @keyframes anim {
                0% {
                    transform: scale(0.5);
                    opacity: 1;
                }
                50% {
                    opacity: 0.8;
                }
                100% {
                    transform: scale(1.3);
                    opacity: 0;
                }
            }




    body
        #app
            // START
            scene(v-if="currentScene==0" :key="0" start-scene @completed="sceneCompleted")

            // SCENES
            scene(v-if="currentScene==1" hidescorebox :key="1" :score="scoreInScene" :temporals="temporals" alloks alloks-sound="../../assets/asound/bienhecho_mujer.mp3" @completed="sceneCompleted" :devmode="$devmode" :answers="8" scene-color="#ED1C25")
                info(type="dragdrop" title=title text="El agua es un elemento natural cuyo ciclo es muy importante para la vida en el planeta. Recordemos sus momentos." textaudio="s/instruccion1.mp3" :autoplay="true" @completedinstructions="temps.au1 = true")
                activity
                    .row.w100: .w100.intro
                        .comic.w100
                            .rain: lottie-player(src="i/rain.json" background="transparent" speed="1" style="width: 100%; height: 100%;" loop autoplay)
                            img(src="i/i1.png").w100
                            .dialog.cl.tip-t(v-if="temps.au1"): audiotext(audio="s/hola.mp3" text="¡Hola! Soy Lluvia. los invito a hacer un recorrido por el ciclo del agua, aprenderemos mucho. ¿Comenzamos?" :autoplay="true" @completed="temps.next = true")
                    
                    .row.w100.text-center(v-if="temps.next"): button(@click="sceneCompleted(false)").button.big.animate__animated.animate__flip Siguiente
            // SCENES
            scene(v-if="currentScene==2" :key="2" :score="scoreInScene" :temporals="temporals" alloks alloks-sound="" @completed="finishapp" :devmode="$devmode" :answers="13" scene-color="#ED1C25")
                info(type="dragdrop" title=title text="Coloca los elementos faltantes en la infografía sobre el ciclo del agua." textaudio="s/instruccion2.mp3" :autoplay="true" @completedinstructions="temps.au1 = true")
                activity
                    .row.w100.wrap
                        .w60.images-wr
                            .images(:class="temps.image?'one':'two'")
                                div.im1(:class="temps.image?'one':'two'")
                                    img(src="i/im1.png").w100
                                    .drops: .drop(v-for="(i, index) in 5" :data="i" droptimes="untilok")
                                    .res.r1(v-if="temps.mark == 1")
                                    .res.r2(v-if="temps.mark == 2")
                                div.im2(:class="temps.image?'one':'two'")
                                    img(src="i/im2.png").w100
                                    .drops: .drop(v-for="(i, index) in 8" :data="i+5" droptimes="untilok")
                                    .res.r3(v-if="temps.mark == 3")
                                    .res.r4(v-if="temps.mark == 4")
                                    .res.r5(v-if="temps.mark == 5")
                                button.button.animate__animated.animate__pulse.animate__infinite.btna(v-if="temps.image==true" @click="temps.image=false") Siguiente
                                button.button.animate__animated.animate__pulse.animate__infinite.btnb(v-if="temps.image==false" @click="temps.image=true") Anterior
                        .w40.wm100(v-if="temps.mark==0")
                            .drags
                                drag(:data="2" dropzone=".drop" ref="a2"  append-to-dropzone stay-if-ok): number(smaller randomc) Océanos
                                drag(:data="3" dropzone=".drop" ref="a3"  append-to-dropzone stay-if-ok): number(smaller randomc) Evaporación
                                
                                drag(:data="6" dropzone=".drop" ref="a6"  append-to-dropzone stay-if-ok): number(smaller randomc) Condensación
                                drag(:data="7" dropzone=".drop" ref="a7"  append-to-dropzone stay-if-ok): number(smaller randomc) Precipitación
                                drag(:data="8" dropzone=".drop" ref="a8"  append-to-dropzone stay-if-ok): number(smaller randomc) Infiltración

                                drag(:data="1" dropzone=".drop" ref="a1"  append-to-dropzone stay-if-ok): div.txt PROCESO EN EL QUE EL AGUA SE DESPLAZA SOBRE Y DEBAJO DE LA SUPERFICIE DE LA TIERRA, UNA Y OTRA VEZ.
                                drag(:data="9" dropzone=".drop" ref="a9"  append-to-dropzone stay-if-ok): div.txt SUCEDE DEBIDO AL CHOQUE DE PARTÍCULAS DE VAPOR DE AGUA EN LAS NUBES.
                                drag(:data="10" dropzone=".drop" ref="a10"  append-to-dropzone stay-if-ok): div.txt AQUELLA QUE NO PUEDE RETENERSE. ESCURRE Y LLEGA A RÍOS Y ARROYOS.

                                drag(:data="4" dropzone=".drop" ref="a4"  append-to-dropzone stay-if-ok): img(src="i/c1.png").w100
                                drag(:data="5" dropzone=".drop" ref="a5"  append-to-dropzone stay-if-ok): img(src="i/c2.png").w100
                                drag(:data="11" dropzone=".drop" ref="a11"  append-to-dropzone stay-if-ok): img(src="i/c3.png").w100
                                drag(:data="12" dropzone=".drop" ref="a12"  append-to-dropzone stay-if-ok): img(src="i/c4.png").w100
                                drag(:data="13" dropzone=".drop" ref="a13"  append-to-dropzone stay-if-ok): img(src="i/c5.png").w100

                            //.text-center: button(@click="dragValidation(['a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'a10', 'a11', 'a12', 'a13'], 13)").button.big.animate__animated.animate__flip Verificar

                            //button(@click="finishapp") Finish


            // END
            scene(v-if="currentScene==3" :key="3" end-scene :final-data="finalData")
        
        +scripts
            script.

                app.$devmode = false
                app.$set(app.temps, 'au1', false)
                app.$set(app.temps, 'next', false)

                app.$set(app.temps, 'image', true)

                app.$set(app.temps, 'mark', 0)

                app.finishapp = function ($ev){
                    app.$set(app.temps, 'ev', $ev)
                    app.temps.image = true
                    // TIME 1
                    app.temps.mark = 1
                    var au1 = new Howl({
                        src: ['s/a2.mp3'],
                        autoplay:true,
                        onend: function () {
                            app.finishapp2()
                        },
                    })
                }

                app.finishapp2= function () {
                    app.temps.mark = 2
                    var au1 = new Howl({
                        src: ['s/a3.mp3'],
                        autoplay:true,
                        onend: function () {
                            app.finishapp3()
                        },
                    })
                }

                app.finishapp3= function () {
                    app.temps.image = false
                    app.temps.mark = 3
                    var au1 = new Howl({
                        src: ['s/a4.mp3'],
                        autoplay:true,
                        onend: function () {
                            app.finishapp4()
                        },
                    })
                }
                app.finishapp4= function () {
                    app.temps.image = false
                    app.temps.mark = 4
                    var au1 = new Howl({
                        src: ['s/a5.mp3'],
                        autoplay:true,
                        onend: function () {
                            app.finishapp5()
                        },
                    })
                }
                app.finishapp5= function () {
                    app.temps.image = false
                    app.temps.mark = 5
                    var au1 = new Howl({
                        src: ['s/a6.mp3'],
                        autoplay:true,
                        onend: function () {
                            app.finishapp6()
                        },
                    })
                }

                app.finishapp6 = function () {
                    app.sceneCompleted(app.temps.ev)
                }

                
                app.currentScene = 0
                app.scenesCount = 1